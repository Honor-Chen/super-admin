import{bB as L,r as s,j as e,b8 as N}from"./index-RSJx6N-X.js";import{F as l}from"./index-D1E-0wE4.js";import{R as C,j as A,y as G}from"./Table-C9vCzstG.js";function M(n,i,r){const{serializer:m,deserializer:u}={serializer:JSON.stringify,deserializer:JSON.parse,...r};return L(n,i,{serializer:m,deserializer:u,storage:"local"})}function V(){const[n,i]=s.useState("combination");return e(s.Fragment,null,e("div",{className:"flex w-min-[800px] flex-col w-full items-center p-[10px] bg-white min-w-[1000px]"},e("div",{className:"p-[15px] w-full"},e("div",{style:{display:n==="business"?"block":"none"}}),e("div",{style:{display:n==="fund"?"block":"none"}}),e("div",{style:{display:n==="combination"?"block":"none"}},e(q,null)))))}function q(){const[n,i]=M("totalPrice",0),[r,m]=M("firstPayRate",3),u=s.useMemo(()=>n*r/10,[n,r]),p=s.useMemo(()=>n-u,[n,u]),[d,R]=M("fundTotal",0),h=s.useMemo(()=>p-d,[p,d]),[f,T]=s.useState(3.1),[g,B]=s.useState(4.2),[v,D]=s.useState(30),[_,z]=s.useState([]),k=[{title:"期数",align:"center",dataIndex:"monthNo",key:"monthNo"},{title:"还款时间",align:"center",dataIndex:"repaymentTime",render:(a,t)=>e("span",null,N(P).add(t.monthNo,"month").format("YYYY-MM-DD"))},{title:"总还款金额(元)",align:"center",dataIndex:"monthPay",render:(a,t)=>e("span",null,(t.monthPay*1e4).toFixed(3))},{title:"商贷还款(元)",align:"center",dataIndex:"monthBusinessPay",render:(a,t)=>e("span",null,(t.monthBusinessPay*1e4).toFixed(3))},{title:"公积金还款(元)",align:"center",dataIndex:"monthFundPay",render:(a,t)=>e("span",null,(t.monthFundPay*1e4).toFixed(3))},{title:"剩余商业贷款(万元)",align:"center",dataIndex:"surplusBusinessPay",render:(a,t)=>e("span",null,t.surplusBusinessPay.toFixed(3))},{title:"剩余公积金贷款(万元)",align:"center",dataIndex:"surplusFundPay",render:(a,t)=>e("span",null,t.surplusFundPay.toFixed(3))},{title:"剩余贷款(万元)",align:"center",dataIndex:"surplusFundPay",render:(a,t)=>e("span",null,(t.surplusFundPay+t.surplusBusinessPay).toFixed(3))}],[x,j]=s.useState(1),[P,K]=s.useState(N().format("YYYY-MM-DD")),[O,w]=s.useState(0);return s.useEffect(()=>{const a=[],t=v*12,c=f/100/12,y=g/100/12;let F=0;if(x===1)for(let b=0;b<t;b++){const I=d*c*Math.pow(1+c,t)/(Math.pow(1+c,t)-1),S=h*y*Math.pow(1+y,t)/(Math.pow(1+y,t)-1),Y=I+S,E=d*(Math.pow(1+c,t)-Math.pow(1+c,b))/(Math.pow(1+c,t)-1),J=h*(Math.pow(1+y,t)-Math.pow(1+y,b))/(Math.pow(1+y,t)-1);F=Y*12,a.push({monthNo:b+1,monthPay:Y,monthFundPay:I,monthBusinessPay:S,surplusFundPay:E,surplusBusinessPay:J})}w(F),z(a)},[d,h,f,g,v,x,w]),e(s.Fragment,null,e("div",{className:"w-full"},e("div",{className:"w-full flex justify-center"},e(l,{size:"small",style:{width:"100%"},labelCol:{span:8},wrapperCol:{span:16}},e("div",{className:"grid-cols-2 grid  gap-0"},e(l.Item,{label:"房屋总价"},e(o,{value:n,onChange:a=>{i(a)},type:"number"})," ",e("span",{className:"ml-[8px]"},"万元")),e(l.Item,{label:"首付几成"},e(o,{value:r,onChange:a=>{m(a)},type:"number"})," ",e("span",{className:"ml-[8px]"},"成")),e(l.Item,{label:"首付"},e(o,{value:u,type:"number",readonly:!0})," ",e("span",{className:"ml-[8px]"},"万元")),e(l.Item,{label:"贷款总额"},e(o,{value:p,type:"number",readonly:!0})," ",e("span",{className:"ml-[8px]"},"万元")),e(l.Item,{label:"公积金贷款"},e(o,{value:d,onChange:a=>{R(a)},type:"number"})," ",e("span",{className:"ml-[8px]"},"万元")),e(l.Item,{label:"公积金贷款利率"},e(o,{value:f,onChange:a=>{T(a)},type:"number"})," ",e("span",{className:"ml-[8px]"},"%")),e(l.Item,{label:"商业贷款"},e(o,{value:h,type:"number",readonly:!0})," ",e("span",{className:"ml-[8px]"},"万元")),e(l.Item,{label:"商业贷款利率"},e(o,{value:g,onChange:a=>{B(a)},type:"number"})," ",e("span",{className:"ml-[8px]"},"%")),e(l.Item,{label:"贷款年限"},e(o,{value:v,onChange:a=>{D(a)},type:"number"})," ",e("span",{className:"ml-[8px]"},"年")),e(l.Item,{label:"还款模式"},e(C.Group,{onChange:a=>{j(a.target.value)},value:x},e(C,{value:1},"等额本息"))),e(l.Item,{label:"开始还款时间"},e(A,{value:P?N(P,"YYYY-MM-DD"):void 0,onChange:(a,t)=>{K(t)}})),x===1&&e(l.Item,{label:"每年还款总额"},e(o,{value:O.toFixed(3),type:"number",readonly:!0})," ",e("span",{className:"ml-[8px]"},"万元"))))),e("div",{className:"w-full"},e(G,{rowKey:"monthNo",bordered:!0,size:"small",pagination:{defaultPageSize:100},columns:k,dataSource:_}))))}function o(n){const{value:i,onChange:r,type:m}=n;return e("input",{value:i,readOnly:n.readonly,placeholder:n.placeholder||"请输入",onChange:u=>{if(m==="number"){if(u.target.value===""){r&&r("");return}const p=Number(u.target.value);if(isNaN(p))return;r&&r(p);return}else r&&r(u.target.value)},style:{backgroundColor:n.readonly?"rgba(159,157,157,0.24)":"transparent"},type:m||"text",className:"border w-[100px] border-gray-300 rounded h-full outline-none px-[10px] py-[6px]"})}export{V as default};
